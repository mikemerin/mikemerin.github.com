<!DOCTYPE html>
<html>
  <head>
    <title>The Ease of ChartJS – Mike Merin's Code Corner – I'm a meteorologist-turned-programmer. You can find my projects and blog here.</title>

        <meta charset="utf-8" />
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'>

    
    <meta name="description" content="You have all this data at your fingertips but showing text only goes so far. Time to add some charts to your page and make it look snazzy.

" />
    <meta property="og:description" content="You have all this data at your fingertips but showing text only goes so far. Time to add some charts to your page and make it look snazzy.

" />
    
    <meta name="author" content="Mike Merin's Code Corner" />

    
    <meta property="og:title" content="The Ease of ChartJS" />
    <meta property="twitter:title" content="The Ease of ChartJS" />
    

    <!--[if lt IE 9]>
      <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="alternate" type="application/rss+xml" title="Mike Merin's Code Corner - I'm a meteorologist-turned-programmer. You can find my projects and blog here." href="/feed.xml" />

    <!-- Created with Jekyll Now - http://github.com/barryclark/jekyll-now -->
  </head>

  <body>
    <div class="wrapper-masthead">
      <div class="container">
        <header class="masthead clearfix">
          <a href="/" class="site-avatar"><img src="https://avatars1.githubusercontent.com/u/25751785?v=3&u=911668ca8f138c635755deeab510034ca325d624&s=400" /></a>

          <div class="site-info">
            <h1 class="site-name"><a href="/">Mike Merin's Code Corner</a></h1>
            <p class="site-description">I'm a meteorologist-turned-programmer. You can find my projects and blog here.</p>
          </div>

          <nav>
            <a href="https://mikemerin.github.io/" target="_blank">Blog</a>
            <a href="https://github.com/mikemerin" target="_blank">Projects</a>
            <a href="/about">About</a>
          </nav>
        </header>
      </div>
    </div>

    <div id="main" role="main" class="container">
      <article class="post">
  <h1>The Ease of ChartJS</h1>
  <h3>WeatherCraft blog part 4: showing off that data</h3>

  <div class="entry">
    <p>You have all this data at your fingertips but showing text only goes so far. Time to add some charts to your page and make it look snazzy.</p>

<p>Some reference materials:</p>

<p>http://www.chartjs.org/docs/latest/charts/line.html
http://www.chartjs.org/samples/latest/charts/area/line-boundaries.html</p>

<hr />

<h1 id="overview">Overview</h1>
<hr />
<p>Note that I skipped part 3 which will talk about the data itself. I wanted to tackle this one first though, part 3 will come after this one.</p>

<p>In <a href="https://mikemerin.github.io/WeatherCraft-blog-2/">part 2</a> of this series of posts I talked about how to get my routes set up to work for not just one data point but all of those surrounding it. I’m working with weather data and for the purposes of this post I’ll be covering the daily data. Just to quickly go recap what I’m working with, here’s what my schema/table looks like for my Rails API:</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="k">class</span> <span class="nc">CreateDailies</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Migration</span><span class="p">[</span><span class="mi">5</span><span class="o">.</span><span class="mi">1</span><span class="p">]</span>
  <span class="k">def</span> <span class="nf">change</span>
    <span class="n">create_table</span> <span class="ss">:dailies</span> <span class="k">do</span> <span class="o">|</span><span class="n">t</span><span class="o">|</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">string</span> <span class="ss">:wban</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">string</span> <span class="ss">:year_month_day</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">string</span> <span class="ss">:tmax</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">string</span> <span class="ss">:tmin</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">string</span> <span class="ss">:tavg</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">string</span> <span class="ss">:depart</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">string</span> <span class="ss">:dew_point</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">string</span> <span class="ss">:sunrise</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">string</span> <span class="ss">:sunset</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">string</span> <span class="ss">:code_sum</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">string</span> <span class="ss">:depth</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">string</span> <span class="ss">:snow_fall</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">string</span> <span class="ss">:precip_total</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">string</span> <span class="ss">:avg_speed</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">string</span> <span class="ss">:max5_speed</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">string</span> <span class="ss">:max5_dir</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">string</span> <span class="ss">:max2_speed</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">string</span> <span class="ss">:max2_dir</span>

      <span class="n">t</span><span class="p">.</span><span class="nf">timestamps</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
</div>

<p>Here are my models. I link everything by a station’s <code class="highlighter-rouge">wban</code> which is its unique ID. This is important and I’ll come back to this in the next section. By setting up my table relationships and linking the primary/foreign keys by <code class="highlighter-rouge">wban</code> we get:</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Station</span> <span class="o">&lt;</span> <span class="no">ApplicationRecord</span>
  <span class="n">has_many</span> <span class="ss">:dailies</span><span class="p">,</span> <span class="ss">primary_key: </span><span class="s2">"wban"</span><span class="p">,</span> <span class="ss">foreign_key: </span><span class="s2">"wban"</span>
<span class="k">end</span>

<span class="k">class</span> <span class="nc">Daily</span> <span class="o">&lt;</span> <span class="no">ApplicationRecord</span>
  <span class="n">belongs_to</span> <span class="ss">:station</span><span class="p">,</span> <span class="ss">primary_key: </span><span class="s2">"wban"</span><span class="p">,</span> <span class="ss">foreign_key: </span><span class="s2">"wban"</span>
<span class="k">end</span>
</code></pre>
</div>

<p>My routes which will give me the endpoints I need:</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">routes</span><span class="p">.</span><span class="nf">draw</span> <span class="k">do</span>

  <span class="n">namespace</span> <span class="ss">:api</span> <span class="k">do</span>
    <span class="n">namespace</span> <span class="ss">:v1</span> <span class="k">do</span>

      <span class="n">resources</span> <span class="ss">:dailies</span><span class="p">,</span> <span class="ss">only: </span><span class="p">[</span><span class="ss">:index</span><span class="p">,</span> <span class="ss">:show</span><span class="p">]</span>

      <span class="n">get</span> <span class="s1">'/dailies/:wban'</span><span class="p">,</span> <span class="ss">to: </span><span class="s1">'stations#show'</span>

      <span class="n">get</span>	<span class="s1">'/dailies/:wban/:year_month_day'</span><span class="p">,</span> <span class="ss">to: </span><span class="s1">'dailies#entry'</span>
      <span class="n">get</span>	<span class="s1">'/dailies/:wban/:year_month_day/adjacent'</span><span class="p">,</span> <span class="ss">to: </span><span class="s1">'dailies#entry_adjacent'</span>
      <span class="n">get</span>	<span class="s1">'/dailies/:wban/:year_month_day/historical'</span><span class="p">,</span> <span class="ss">to: </span><span class="s1">'dailies#entry_historical'</span>

    <span class="k">end</span>
  <span class="k">end</span>

<span class="k">end</span>

</code></pre>
</div>

<p>And finally my controllers. which hit those routes:</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Api</span><span class="o">::</span><span class="no">V1</span><span class="o">::</span><span class="no">DailiesController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>

  <span class="k">def</span> <span class="nf">index</span>
    <span class="vi">@dailies</span> <span class="o">=</span> <span class="no">Daily</span><span class="p">.</span><span class="nf">all</span>
    <span class="n">render</span> <span class="ss">json: </span><span class="vi">@dailies</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">show</span>
    <span class="vi">@dailies</span> <span class="o">=</span> <span class="no">Daily</span><span class="p">.</span><span class="nf">where</span><span class="p">(</span><span class="ss">wban: </span><span class="n">params</span><span class="p">[</span><span class="ss">:id</span><span class="p">])</span>
    <span class="n">render</span> <span class="ss">json: </span><span class="vi">@dailies</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">entry</span>
    <span class="vi">@daily</span> <span class="o">=</span> <span class="no">Daily</span><span class="p">.</span><span class="nf">find_by</span><span class="p">(</span><span class="ss">wban: </span><span class="n">params</span><span class="p">[</span><span class="ss">:wban</span><span class="p">],</span> <span class="ss">year_month_day: </span><span class="n">params</span><span class="p">[</span><span class="ss">:year_month_day</span><span class="p">])</span>
    <span class="n">render</span> <span class="ss">json: </span><span class="p">[</span><span class="vi">@daily</span><span class="p">]</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">entry_adjacent</span>
    <span class="n">day</span> <span class="o">=</span> <span class="no">Daily</span><span class="p">.</span><span class="nf">find_by</span><span class="p">(</span><span class="ss">wban: </span><span class="n">params</span><span class="p">[</span><span class="ss">:wban</span><span class="p">],</span> <span class="ss">year_month_day: </span><span class="n">params</span><span class="p">[</span><span class="ss">:year_month_day</span><span class="p">])[</span><span class="ss">:id</span><span class="p">]</span>
    <span class="n">dailies</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span><span class="p">.</span><span class="nf">connection</span><span class="p">.</span><span class="nf">execute</span><span class="p">(</span><span class="s2">"SELECT * FROM dailies where id &lt; </span><span class="si">#{</span><span class="n">day</span><span class="si">}</span><span class="s2"> and wban = '</span><span class="si">#{</span><span class="n">params</span><span class="p">[</span><span class="ss">:wban</span><span class="p">]</span><span class="si">}</span><span class="s2">' order by id desc limit 5"</span><span class="p">).</span><span class="nf">reverse_each</span> <span class="p">{</span> <span class="o">|</span><span class="n">x</span><span class="o">|</span> <span class="n">dailies</span> <span class="o">&lt;&lt;</span> <span class="n">x</span> <span class="p">}</span>
    <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span><span class="p">.</span><span class="nf">connection</span><span class="p">.</span><span class="nf">execute</span><span class="p">(</span><span class="s2">"SELECT * FROM dailies where id &gt;= </span><span class="si">#{</span><span class="n">day</span><span class="si">}</span><span class="s2"> and wban = '</span><span class="si">#{</span><span class="n">params</span><span class="p">[</span><span class="ss">:wban</span><span class="p">]</span><span class="si">}</span><span class="s2">' order by id limit 6"</span><span class="p">).</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">x</span><span class="o">|</span> <span class="n">dailies</span> <span class="o">&lt;&lt;</span> <span class="n">x</span> <span class="p">}</span>
    <span class="n">render</span> <span class="ss">json: </span><span class="n">dailies</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">entry_historical</span>
    <span class="n">date</span> <span class="o">=</span> <span class="n">params</span><span class="p">[</span><span class="ss">:year_month_day</span><span class="p">].</span><span class="nf">slice</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
    <span class="n">years</span> <span class="o">=</span> <span class="p">(</span><span class="s2">"2007"</span><span class="p">.</span><span class="nf">.</span><span class="s2">"2017"</span><span class="p">).</span><span class="nf">to_a</span>
    <span class="n">dailies</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">years</span><span class="p">.</span><span class="nf">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">x</span><span class="o">|</span> <span class="n">dailies</span> <span class="o">&lt;&lt;</span> <span class="n">x</span><span class="o">+</span><span class="n">date</span> <span class="p">}</span>
    <span class="n">dailies</span><span class="p">.</span><span class="nf">delete_if</span> <span class="p">{</span> <span class="o">|</span><span class="n">x</span><span class="o">|</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="s2">"20070501"</span> <span class="o">||</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="s2">"20170630"</span> <span class="p">}</span>
    <span class="n">dailies</span><span class="p">.</span><span class="nf">map!</span> <span class="p">{</span> <span class="o">|</span><span class="n">x</span><span class="o">|</span> <span class="no">Daily</span><span class="p">.</span><span class="nf">find_by</span><span class="p">(</span><span class="ss">wban: </span><span class="n">params</span><span class="p">[</span><span class="ss">:wban</span><span class="p">],</span> <span class="ss">year_month_day: </span><span class="n">x</span><span class="p">)</span> <span class="p">}</span>
    <span class="n">render</span> <span class="ss">json: </span><span class="n">dailies</span>
  <span class="k">end</span>

  <span class="kp">private</span>

  <span class="k">def</span> <span class="nf">daily_params</span>
    <span class="n">params</span><span class="p">.</span><span class="nf">require</span><span class="p">(</span><span class="ss">:daily</span><span class="p">).</span><span class="nf">permit</span><span class="p">(</span>
      <span class="ss">:wban</span><span class="p">,</span> <span class="ss">:year_month_day</span><span class="p">,</span>
      <span class="ss">:tmax</span><span class="p">,</span> <span class="ss">:tmin</span><span class="p">,</span> <span class="ss">:tavg</span><span class="p">,</span> <span class="ss">:depart</span><span class="p">,</span> <span class="ss">:dew_point</span><span class="p">,</span>
      <span class="ss">:sunrise</span><span class="p">,</span> <span class="ss">:sunset</span><span class="p">,</span> <span class="ss">:code_sum</span><span class="p">,</span>
      <span class="ss">:depth</span><span class="p">,</span> <span class="ss">:snow_fall</span><span class="p">,</span> <span class="ss">:precip_total</span><span class="p">,</span>
      <span class="ss">:result_speed</span><span class="p">,</span> <span class="ss">:result_dir</span><span class="p">,</span> <span class="ss">:avg_speed</span><span class="p">,</span>
      <span class="ss">:max5_speed</span><span class="p">,</span> <span class="ss">:max5_dir</span><span class="p">,</span> <span class="ss">:max2_speed</span><span class="p">,</span> <span class="ss">:max2_dir</span>
      <span class="p">)</span>
  <span class="k">end</span>

<span class="k">end</span>
</code></pre>
</div>

<p>We’ll be focusing on <code class="highlighter-rouge">entry_adjacent</code> for this post, which gets not only the day/entry in question but the 5 surrounding days/entries.</p>

<h1 id="using-our-data">Using Our Data</h1>
<hr />

<p>Right now we have this massive amount of data to use, but we’ll just focus on the temperatures in our data. The columns we’ll use are <code class="highlighter-rouge">year_month_day</code>, <code class="highlighter-rouge">tmax</code>, <code class="highlighter-rouge">tmin</code>, and <code class="highlighter-rouge">tavg</code>.</p>

<p>In our app we hit our DailiesAdapter first which does:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">entry_adjacent</span><span class="p">(</span><span class="nx">wban</span><span class="p">,</span> <span class="nx">date</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">fetch</span><span class="p">(</span><span class="err">`</span><span class="nx">$</span><span class="p">{</span><span class="nx">dailies_URL</span><span class="p">}</span><span class="sr">/${wban}/</span><span class="nx">$</span><span class="p">{</span><span class="nx">date</span><span class="p">}</span><span class="sr">/adjacent`</span><span class="err">)
</span>      <span class="p">.</span><span class="nx">then</span><span class="p">(</span> <span class="nx">res</span> <span class="o">=&gt;</span> <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">()</span> <span class="p">)</span>
  <span class="p">}</span>
</code></pre>
</div>

<p>This hits our API and JSON stringifies our data. We then can take our data (again just focusing on our temps) and split up each row into their days, the pre-5 days and the post-5 days. There are a few issues that I ran into that you may as well:</p>

<p>Most of my data is parsed as strings. While as humans we can read <code class="highlighter-rouge">"50"</code> as the number <code class="highlighter-rouge">50</code>, ChartJS interprets it as <code class="highlighter-rouge">NaN</code> which of course means it will show as missing data. To fix this, <code class="highlighter-rouge">tmax</code> and <code class="highlighter-rouge">tmin</code> are straightforward:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kr">const</span> <span class="nx">tmax</span> <span class="o">=</span> <span class="nb">parseFloat</span><span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">tmax</span><span class="p">)</span>
<span class="kr">const</span> <span class="nx">tmin</span> <span class="o">=</span> <span class="nb">parseFloat</span><span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">tmin</span><span class="p">)</span>
</code></pre>
</div>

<p>Next, while the <code class="highlighter-rouge">tmax</code> and <code class="highlighter-rouge">tmin</code> in our data is usually present, the <code class="highlighter-rouge">tavg</code> is not and again, we don’t want missing data. We can simply spoof it to be the average of the day’s high and low which while isn’t accurate, will at least give us a connected graph. So I’ll just add an if statement that says “if <code class="highlighter-rouge">tavg</code> is <code class="highlighter-rouge">'M'</code> or for the pre/post values aren’t numbers then fix it up.</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">pre1_tavg</span><span class="p">))</span> <span class="p">{</span> <span class="nx">pre1_tavg</span> <span class="o">=</span> <span class="p">(</span><span class="nx">pre1_tmax</span> <span class="o">+</span> <span class="nx">pre1_tmin</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span> <span class="p">}</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">tavg</span> <span class="o">===</span> <span class="s2">"M"</span><span class="p">)</span> <span class="p">{</span> <span class="nx">tavg</span> <span class="o">=</span> <span class="p">(</span><span class="nx">tmax</span> <span class="o">+</span> <span class="nx">tmin</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span> <span class="p">}</span>
</code></pre>
</div>

<p>We’ll also take a second to modify the <code class="highlighter-rouge">year_month_day</code> to only have the month/day to keep the labels clean and be easier to read. Our current <code class="highlighter-rouge">year_month_day</code> for example looks like <code class="highlighter-rouge">20160123</code>, however we only need the month and day since the year will be shown elsewhere. First we’ll use <code class="highlighter-rouge">slice</code> to get our MM which in this case is <code class="highlighter-rouge">01</code> and then use <code class="highlighter-rouge">parseInt</code> to convert it to an integer to not only remove the leading 0, but something else I’ll talk about shortly. We’ll also use slice to get the day from DD.</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kr">const</span> <span class="nx">month_day</span> <span class="o">=</span> <span class="err">`</span><span class="nx">$</span><span class="p">{</span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">pre5_year_month_day</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">),</span> <span class="mi">10</span><span class="p">)}</span> <span class="nx">$</span><span class="p">{</span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">pre5_year_month_day</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">8</span><span class="p">),</span> <span class="mi">10</span><span class="p">)}</span><span class="err">`</span>
</code></pre>
</div>

<p>Onto that second reason I was talking about for the months: I want not just a month’s number but to also the name of the month. I made an array called <code class="highlighter-rouge">DateParser</code>:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kr">const</span> <span class="nx">DateParser</span> <span class="o">=</span> <span class="p">[</span> <span class="s1">'Months'</span><span class="p">,</span> <span class="s1">'January'</span><span class="p">,</span> <span class="s1">'February'</span><span class="p">,</span> <span class="s1">'March'</span><span class="p">,</span> <span class="s1">'April'</span><span class="p">,</span> <span class="s1">'May'</span><span class="p">,</span>
  <span class="s1">'June'</span><span class="p">,</span> <span class="s1">'July'</span><span class="p">,</span> <span class="s1">'August'</span><span class="p">,</span> <span class="s1">'September'</span><span class="p">,</span> <span class="s1">'October'</span><span class="p">,</span> <span class="s1">'November'</span><span class="p">,</span> <span class="s1">'December'</span> <span class="p">]</span>
</code></pre>
</div>

<p>Since DateParser is an array, we can do <code class="highlighter-rouge">DateParser[1]</code> to hit January. That <strong>1</strong> comes from our parseInt we used before. I made index 0 ‘Months’ which would let the month number of 1 hit ‘January’, 2 hit ‘February’, etc. With DateParser there let’s hit it by doing the following:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">//before</span>
<span class="kr">const</span> <span class="nx">month_day</span> <span class="o">=</span> <span class="err">`</span><span class="nx">$</span><span class="p">{</span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">pre5_year_month_day</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">),</span> <span class="mi">10</span><span class="p">)}</span> <span class="nx">$</span><span class="p">{</span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">pre5_year_month_day</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">8</span><span class="p">),</span> <span class="mi">10</span><span class="p">)}</span><span class="err">`</span>
<span class="c1">// adding DateParser</span>
<span class="kr">const</span> <span class="nx">pre5_month_day</span> <span class="o">=</span> <span class="err">`</span><span class="nx">$</span><span class="p">{</span><span class="nx">DateParser</span><span class="p">[</span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">pre5_year_month_day</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">),</span> <span class="mi">10</span><span class="p">)]}</span> <span class="nx">$</span><span class="p">{</span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">pre5_year_month_day</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">8</span><span class="p">),</span> <span class="mi">10</span><span class="p">)}</span><span class="err">`</span>
<span class="c1">// we'll take it one step farther and just use the first three letters of the month by slicing January to Jan with .slice0,3</span>
<span class="kr">const</span> <span class="nx">pre5_month_day</span> <span class="o">=</span> <span class="err">`</span><span class="nx">$</span><span class="p">{</span><span class="nx">DateParser</span><span class="p">[</span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">pre5_year_month_day</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">),</span> <span class="mi">10</span><span class="p">)].</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">)}</span> <span class="nx">$</span><span class="p">{</span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">pre5_year_month_day</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">8</span><span class="p">),</span> <span class="mi">10</span><span class="p">)}</span><span class="err">`</span>
</code></pre>
</div>

<p>Putting this all together into our React app we get the following:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kr">import</span> <span class="nx">React</span> <span class="nx">from</span> <span class="s1">'react'</span>

<span class="kr">export</span> <span class="kr">const</span> <span class="nx">Graph</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>

  <span class="kr">const</span> <span class="nx">DateParser</span> <span class="o">=</span> <span class="p">[</span> <span class="s1">'Months'</span><span class="p">,</span> <span class="s1">'January'</span><span class="p">,</span> <span class="s1">'February'</span><span class="p">,</span> <span class="s1">'March'</span><span class="p">,</span> <span class="s1">'April'</span><span class="p">,</span> <span class="s1">'May'</span><span class="p">,</span>
    <span class="s1">'June'</span><span class="p">,</span> <span class="s1">'July'</span><span class="p">,</span> <span class="s1">'August'</span><span class="p">,</span> <span class="s1">'September'</span><span class="p">,</span> <span class="s1">'October'</span><span class="p">,</span> <span class="s1">'November'</span><span class="p">,</span> <span class="s1">'December'</span> <span class="p">]</span>

  <span class="kd">let</span> <span class="p">{</span> <span class="nx">pre5_year_month_day</span><span class="p">,</span> <span class="nx">pre4_year_month_day</span><span class="p">,</span> <span class="nx">pre3_year_month_day</span><span class="p">,</span>
          <span class="nx">pre2_year_month_day</span><span class="p">,</span> <span class="nx">pre1_year_month_day</span><span class="p">,</span> <span class="nx">year_month_day</span><span class="p">,</span>
          <span class="nx">post5_year_month_day</span><span class="p">,</span> <span class="nx">post4_year_month_day</span><span class="p">,</span> <span class="nx">post3_year_month_day</span><span class="p">,</span>
          <span class="nx">post2_year_month_day</span><span class="p">,</span> <span class="nx">post1_year_month_day</span><span class="p">,</span> <span class="nx">tmax</span><span class="p">,</span> <span class="nx">tmin</span><span class="p">,</span> <span class="nx">tavg</span><span class="p">,</span>
          <span class="nx">pre5_tmax</span><span class="p">,</span> <span class="nx">pre5_tmin</span><span class="p">,</span> <span class="nx">pre5_tavg</span><span class="p">,</span> <span class="nx">pre4_tmax</span><span class="p">,</span> <span class="nx">pre4_tmin</span><span class="p">,</span> <span class="nx">pre4_tavg</span><span class="p">,</span>
          <span class="nx">pre3_tmax</span><span class="p">,</span> <span class="nx">pre3_tmin</span><span class="p">,</span> <span class="nx">pre3_tavg</span><span class="p">,</span> <span class="nx">pre2_tmax</span><span class="p">,</span> <span class="nx">pre2_tmin</span><span class="p">,</span> <span class="nx">pre2_tavg</span><span class="p">,</span>
          <span class="nx">pre1_tmax</span><span class="p">,</span> <span class="nx">pre1_tmin</span><span class="p">,</span> <span class="nx">pre1_tavg</span><span class="p">,</span> <span class="nx">post5_tmax</span><span class="p">,</span> <span class="nx">post5_tmin</span><span class="p">,</span> <span class="nx">post5_tavg</span><span class="p">,</span>
          <span class="nx">post4_tmax</span><span class="p">,</span> <span class="nx">post4_tmin</span><span class="p">,</span> <span class="nx">post4_tavg</span><span class="p">,</span> <span class="nx">post3_tmax</span><span class="p">,</span> <span class="nx">post3_tmin</span><span class="p">,</span> <span class="nx">post3_tavg</span><span class="p">,</span>
          <span class="nx">post2_tmax</span><span class="p">,</span> <span class="nx">post2_tmin</span><span class="p">,</span> <span class="nx">post2_tavg</span><span class="p">,</span> <span class="nx">post1_tmax</span><span class="p">,</span> <span class="nx">post1_tmin</span><span class="p">,</span> <span class="nx">post1_tavg</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">props</span><span class="p">.</span><span class="nx">data</span>

    <span class="kr">const</span> <span class="nx">pre5</span> <span class="o">=</span> <span class="err">`</span><span class="nx">$</span><span class="p">{</span><span class="nx">DateParser</span><span class="p">[</span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">pre5_year_month_day</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">),</span> <span class="mi">10</span><span class="p">)].</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">)}</span> <span class="nx">$</span><span class="p">{</span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">pre5_year_month_day</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">8</span><span class="p">),</span> <span class="mi">10</span><span class="p">)}</span><span class="err">`</span>
    <span class="kr">const</span> <span class="nx">pre4</span> <span class="o">=</span> <span class="err">`</span><span class="nx">$</span><span class="p">{</span><span class="nx">DateParser</span><span class="p">[</span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">pre4_year_month_day</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">),</span> <span class="mi">10</span><span class="p">)].</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">)}</span> <span class="nx">$</span><span class="p">{</span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">pre4_year_month_day</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">8</span><span class="p">),</span> <span class="mi">10</span><span class="p">)}</span><span class="err">`</span>
    <span class="kr">const</span> <span class="nx">pre3</span> <span class="o">=</span> <span class="err">`</span><span class="nx">$</span><span class="p">{</span><span class="nx">DateParser</span><span class="p">[</span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">pre3_year_month_day</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">),</span> <span class="mi">10</span><span class="p">)].</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">)}</span> <span class="nx">$</span><span class="p">{</span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">pre3_year_month_day</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">8</span><span class="p">),</span> <span class="mi">10</span><span class="p">)}</span><span class="err">`</span>
    <span class="kr">const</span> <span class="nx">pre2</span> <span class="o">=</span> <span class="err">`</span><span class="nx">$</span><span class="p">{</span><span class="nx">DateParser</span><span class="p">[</span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">pre2_year_month_day</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">),</span> <span class="mi">10</span><span class="p">)].</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">)}</span> <span class="nx">$</span><span class="p">{</span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">pre2_year_month_day</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">8</span><span class="p">),</span> <span class="mi">10</span><span class="p">)}</span><span class="err">`</span>
    <span class="kr">const</span> <span class="nx">pre1</span> <span class="o">=</span> <span class="err">`</span><span class="nx">$</span><span class="p">{</span><span class="nx">DateParser</span><span class="p">[</span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">pre1_year_month_day</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">),</span> <span class="mi">10</span><span class="p">)].</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">)}</span> <span class="nx">$</span><span class="p">{</span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">pre1_year_month_day</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">8</span><span class="p">),</span> <span class="mi">10</span><span class="p">)}</span><span class="err">`</span>
    <span class="kr">const</span> <span class="nx">today</span> <span class="o">=</span> <span class="err">`</span><span class="nx">$</span><span class="p">{</span><span class="nx">DateParser</span><span class="p">[</span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">year_month_day</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">),</span> <span class="mi">10</span><span class="p">)].</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">)}</span> <span class="nx">$</span><span class="p">{</span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">year_month_day</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">8</span><span class="p">),</span> <span class="mi">10</span><span class="p">)}</span><span class="err">`</span>
    <span class="kr">const</span> <span class="nx">post1</span> <span class="o">=</span> <span class="err">`</span><span class="nx">$</span><span class="p">{</span><span class="nx">DateParser</span><span class="p">[</span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">post1_year_month_day</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">),</span> <span class="mi">10</span><span class="p">)].</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">)}</span> <span class="nx">$</span><span class="p">{</span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">post1_year_month_day</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">8</span><span class="p">),</span> <span class="mi">10</span><span class="p">)}</span><span class="err">`</span>
    <span class="kr">const</span> <span class="nx">post2</span> <span class="o">=</span> <span class="err">`</span><span class="nx">$</span><span class="p">{</span><span class="nx">DateParser</span><span class="p">[</span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">post2_year_month_day</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">),</span> <span class="mi">10</span><span class="p">)].</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">)}</span> <span class="nx">$</span><span class="p">{</span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">post2_year_month_day</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">8</span><span class="p">),</span> <span class="mi">10</span><span class="p">)}</span><span class="err">`</span>
    <span class="kr">const</span> <span class="nx">post3</span> <span class="o">=</span> <span class="err">`</span><span class="nx">$</span><span class="p">{</span><span class="nx">DateParser</span><span class="p">[</span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">post3_year_month_day</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">),</span> <span class="mi">10</span><span class="p">)].</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">)}</span> <span class="nx">$</span><span class="p">{</span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">post3_year_month_day</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">8</span><span class="p">),</span> <span class="mi">10</span><span class="p">)}</span><span class="err">`</span>
    <span class="kr">const</span> <span class="nx">post4</span> <span class="o">=</span> <span class="err">`</span><span class="nx">$</span><span class="p">{</span><span class="nx">DateParser</span><span class="p">[</span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">post4_year_month_day</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">),</span> <span class="mi">10</span><span class="p">)].</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">)}</span> <span class="nx">$</span><span class="p">{</span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">post4_year_month_day</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">8</span><span class="p">),</span> <span class="mi">10</span><span class="p">)}</span><span class="err">`</span>
    <span class="kr">const</span> <span class="nx">post5</span> <span class="o">=</span> <span class="err">`</span><span class="nx">$</span><span class="p">{</span><span class="nx">DateParser</span><span class="p">[</span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">post5_year_month_day</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">),</span> <span class="mi">10</span><span class="p">)].</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">)}</span> <span class="nx">$</span><span class="p">{</span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">post5_year_month_day</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">8</span><span class="p">),</span> <span class="mi">10</span><span class="p">)}</span><span class="err">`</span>


    <span class="k">if</span> <span class="p">(</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">pre5_tavg</span><span class="p">))</span> <span class="p">{</span> <span class="nx">pre5_tavg</span> <span class="o">=</span> <span class="p">(</span><span class="nx">pre5_tmax</span> <span class="o">+</span> <span class="nx">pre5_tmin</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span> <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">pre4_tavg</span><span class="p">))</span> <span class="p">{</span> <span class="nx">pre4_tavg</span> <span class="o">=</span> <span class="p">(</span><span class="nx">pre4_tmax</span> <span class="o">+</span> <span class="nx">pre4_tmin</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span> <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">pre3_tavg</span><span class="p">))</span> <span class="p">{</span> <span class="nx">pre3_tavg</span> <span class="o">=</span> <span class="p">(</span><span class="nx">pre3_tmax</span> <span class="o">+</span> <span class="nx">pre3_tmin</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span> <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">pre2_tavg</span><span class="p">))</span> <span class="p">{</span> <span class="nx">pre2_tavg</span> <span class="o">=</span> <span class="p">(</span><span class="nx">pre2_tmax</span> <span class="o">+</span> <span class="nx">pre2_tmin</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span> <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">pre1_tavg</span><span class="p">))</span> <span class="p">{</span> <span class="nx">pre1_tavg</span> <span class="o">=</span> <span class="p">(</span><span class="nx">pre1_tmax</span> <span class="o">+</span> <span class="nx">pre1_tmin</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span> <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">tavg</span> <span class="o">===</span> <span class="s2">"M"</span><span class="p">)</span> <span class="p">{</span> <span class="nx">tavg</span> <span class="o">=</span> <span class="p">(</span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">tmax</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span> <span class="o">+</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">tmin</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span> <span class="o">/</span> <span class="mi">2</span> <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">post1_tavg</span><span class="p">))</span> <span class="p">{</span> <span class="nx">post1_tavg</span> <span class="o">=</span> <span class="p">(</span><span class="nx">post1_tmax</span> <span class="o">+</span> <span class="nx">post1_tmin</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span> <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">post2_tavg</span><span class="p">))</span> <span class="p">{</span> <span class="nx">post2_tavg</span> <span class="o">=</span> <span class="p">(</span><span class="nx">post2_tmax</span> <span class="o">+</span> <span class="nx">post2_tmin</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span> <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">post3_tavg</span><span class="p">))</span> <span class="p">{</span> <span class="nx">post3_tavg</span> <span class="o">=</span> <span class="p">(</span><span class="nx">post3_tmax</span> <span class="o">+</span> <span class="nx">post3_tmin</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span> <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">post4_tavg</span><span class="p">))</span> <span class="p">{</span> <span class="nx">post4_tavg</span> <span class="o">=</span> <span class="p">(</span><span class="nx">post4_tmax</span> <span class="o">+</span> <span class="nx">post4_tmin</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span> <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">post5_tavg</span><span class="p">))</span> <span class="p">{</span> <span class="nx">post5_tavg</span> <span class="o">=</span> <span class="p">(</span><span class="nx">post5_tmax</span> <span class="o">+</span> <span class="nx">post5_tmin</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span> <span class="p">}</span>

    <span class="kd">let</span> <span class="nx">labels</span> <span class="o">=</span> <span class="p">[</span><span class="nx">pre5</span><span class="p">,</span> <span class="nx">pre4</span><span class="p">,</span> <span class="nx">pre3</span><span class="p">,</span> <span class="nx">pre2</span><span class="p">,</span> <span class="nx">pre1</span><span class="p">,</span> <span class="nx">today</span><span class="p">,</span> <span class="nx">post1</span><span class="p">,</span> <span class="nx">post2</span><span class="p">,</span> <span class="nx">post3</span><span class="p">,</span> <span class="nx">post4</span><span class="p">,</span> <span class="nx">post5</span><span class="p">]</span>

<span class="p">}</span>
</code></pre>
</div>

<h1 id="creating-our-graph">Creating our graph</h1>
<hr />

<p>Now’s the easy part: putting in our graph. ChartJS makes it easy to separate out the labels, how we can customize our data, and actually put in our data. I’ll just throw up what my code looks like and explain things as I go along:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// I can do line here, but Bar also allows you to mix together bar and line.</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">Bar</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">'react-chartjs-2'</span>

<span class="kr">const</span> <span class="nx">data_temps</span> <span class="o">=</span> <span class="p">{</span>
      <span class="c1">// takes the Month/Date labels and tells our graph to put it at the bottom of our axis</span>
      <span class="na">labels</span><span class="p">:</span> <span class="nx">labels</span><span class="p">,</span>
      <span class="c1">// here are some of our graph's options. I want some space to the left/right which is padding</span>
      <span class="na">options</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">layout</span><span class="p">:</span> <span class="p">{</span>
          <span class="na">padding</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">left</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
            <span class="na">right</span><span class="p">:</span> <span class="mi">100</span>
          <span class="p">}</span>
        <span class="p">},</span>
        <span class="c1">// I also want to make sure my x axis has a small increment of .1</span>
        <span class="na">scales</span><span class="p">:</span> <span class="p">{</span>
          <span class="na">xAxes</span><span class="p">:</span> <span class="p">[{</span>
            <span class="na">barThickness</span><span class="p">:</span> <span class="mf">0.1</span>
          <span class="p">}]</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="c1">// here's where I'll put in my data:</span>
      <span class="na">datasets</span><span class="p">:</span> <span class="p">[</span>
        <span class="c1">// first up the high temps</span>
        <span class="p">{</span>
          <span class="c1">// what I want this labelled as</span>
          <span class="na">label</span><span class="p">:</span> <span class="s1">'High Temps'</span><span class="p">,</span>
          <span class="c1">// I can choose bar or line here</span>
          <span class="na">type</span><span class="p">:</span> <span class="s1">'line'</span><span class="p">,</span>
          <span class="c1">// how I want this filled. I can do empty/false, start, end, origin, or use numbers to fill to the next line,</span>
          <span class="na">fill</span><span class="p">:</span> <span class="s2">"+1"</span><span class="p">,</span>
          <span class="c1">// how curvy/straight you want the line</span>
          <span class="na">lineTension</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">,</span>
          <span class="c1">// BG color in RBG and alpha (opacity)</span>
          <span class="na">backgroundColor</span><span class="p">:</span> <span class="s1">'rgba(255,0,77,0.4)'</span><span class="p">,</span>
          <span class="c1">// border color in RBG and alpha (opacity)</span>
          <span class="na">borderColor</span><span class="p">:</span> <span class="s1">'rgba(255,0,77,1)'</span><span class="p">,</span>
          <span class="c1">// the type of cap you want</span>
          <span class="na">borderCapStyle</span><span class="p">:</span> <span class="s1">'butt'</span><span class="p">,</span>
          <span class="c1">// if you want the border solid or dashed and what type</span>
          <span class="na">borderDash</span><span class="p">:</span> <span class="p">[],</span>
          <span class="c1">// if dashed, how much space in-between</span>
          <span class="na">borderDashOffset</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
          <span class="c1">// how to join the borders together</span>
          <span class="na">borderJoinStyle</span><span class="p">:</span> <span class="s1">'miter'</span><span class="p">,</span>
          <span class="c1">// the color of that joining in the same RBG/A</span>
          <span class="na">pointBorderColor</span><span class="p">:</span> <span class="s1">'rgba(255,0,77,1)'</span><span class="p">,</span>
          <span class="c1">// the fill for that point</span>
          <span class="na">pointBackgroundColor</span><span class="p">:</span> <span class="s1">'#fff'</span><span class="p">,</span>
          <span class="na">pointBorderWidth</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
          <span class="na">pointHoverRadius</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
          <span class="c1">// the next three are when you hover over each data point</span>
          <span class="na">pointHoverBackgroundColor</span><span class="p">:</span> <span class="s1">'rgba(255,0,77,1)'</span><span class="p">,</span>
          <span class="na">pointHoverBorderColor</span><span class="p">:</span> <span class="s1">'rgba(255,0,77,1)'</span><span class="p">,</span>
          <span class="na">pointHoverBorderWidth</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
          <span class="na">pointRadius</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
          <span class="na">pointHitRadius</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
          <span class="c1">// finally the data values we'll load into our line</span>
          <span class="na">data</span><span class="p">:</span> <span class="p">[</span><span class="nx">pre5_tmax</span><span class="p">,</span> <span class="nx">pre4_tmax</span><span class="p">,</span> <span class="nx">pre3_tmax</span><span class="p">,</span> <span class="nx">pre2_tmax</span><span class="p">,</span> <span class="nx">pre1_tmax</span><span class="p">,</span> <span class="nx">tmax</span><span class="p">,</span> <span class="nx">post1_tmax</span><span class="p">,</span> <span class="nx">post2_tmax</span><span class="p">,</span> <span class="nx">post3_tmax</span><span class="p">,</span> <span class="nx">post4_tmax</span><span class="p">,</span> <span class="nx">post5_tmax</span><span class="p">]</span>
        <span class="p">},</span>
        <span class="c1">// rinse and repeat</span>
        <span class="p">{</span>
          <span class="na">label</span><span class="p">:</span> <span class="s1">'Average Temps'</span><span class="p">,</span>
          <span class="na">type</span><span class="p">:</span> <span class="s1">'line'</span><span class="p">,</span>
          <span class="na">fill</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
          <span class="na">lineTension</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">,</span>
          <span class="na">backgroundColor</span><span class="p">:</span> <span class="s1">'rgba(255, 116, 0,0.4)'</span><span class="p">,</span>
          <span class="na">borderColor</span><span class="p">:</span> <span class="s1">'rgba(255, 116, 0,0.4)'</span><span class="p">,</span>
          <span class="na">borderCapStyle</span><span class="p">:</span> <span class="s1">'butt'</span><span class="p">,</span>
          <span class="na">borderDash</span><span class="p">:</span> <span class="p">[],</span>
          <span class="na">borderDashOffset</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
          <span class="na">borderJoinStyle</span><span class="p">:</span> <span class="s1">'miter'</span><span class="p">,</span>
          <span class="na">pointBorderColor</span><span class="p">:</span> <span class="s1">'rgba(255, 116, 0,1)'</span><span class="p">,</span>
          <span class="na">pointBackgroundColor</span><span class="p">:</span> <span class="s1">'#fff'</span><span class="p">,</span>
          <span class="na">pointBorderWidth</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
          <span class="na">pointHoverRadius</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
          <span class="na">pointHoverBackgroundColor</span><span class="p">:</span> <span class="s1">'rgba(255, 116, 0,1)'</span><span class="p">,</span>
          <span class="na">pointHoverBorderColor</span><span class="p">:</span> <span class="s1">'rgba(255, 116, 0,1)'</span><span class="p">,</span>
          <span class="na">pointHoverBorderWidth</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
          <span class="na">pointRadius</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
          <span class="na">pointHitRadius</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
          <span class="na">data</span><span class="p">:</span> <span class="p">[</span><span class="nx">pre5_tavg</span><span class="p">,</span> <span class="nx">pre4_tavg</span><span class="p">,</span> <span class="nx">pre3_tavg</span><span class="p">,</span> <span class="nx">pre2_tavg</span><span class="p">,</span> <span class="nx">pre1_tavg</span><span class="p">,</span> <span class="nx">tavg</span><span class="p">,</span> <span class="nx">post1_tavg</span><span class="p">,</span> <span class="nx">post2_tavg</span><span class="p">,</span> <span class="nx">post3_tavg</span><span class="p">,</span> <span class="nx">post4_tavg</span><span class="p">,</span> <span class="nx">post5_tavg</span><span class="p">]</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="na">label</span><span class="p">:</span> <span class="s1">'Low Temps'</span><span class="p">,</span>
          <span class="na">type</span><span class="p">:</span> <span class="s1">'line'</span><span class="p">,</span>
          <span class="na">fill</span><span class="p">:</span> <span class="s1">'-1'</span><span class="p">,</span>
          <span class="na">lineTension</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">,</span>
          <span class="na">backgroundColor</span><span class="p">:</span> <span class="s1">'rgba(169, 13, 255,0.4)'</span><span class="p">,</span>
          <span class="na">borderColor</span><span class="p">:</span> <span class="s1">'rgba(169, 13, 255,1)'</span><span class="p">,</span>
          <span class="na">borderCapStyle</span><span class="p">:</span> <span class="s1">'butt'</span><span class="p">,</span>
          <span class="na">borderDash</span><span class="p">:</span> <span class="p">[],</span>
          <span class="na">borderDashOffset</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
          <span class="na">borderJoinStyle</span><span class="p">:</span> <span class="s1">'miter'</span><span class="p">,</span>
          <span class="na">pointBorderColor</span><span class="p">:</span> <span class="s1">'rgba(169, 13, 255,1)'</span><span class="p">,</span>
          <span class="na">pointBackgroundColor</span><span class="p">:</span> <span class="s1">'#fff'</span><span class="p">,</span>
          <span class="na">pointBorderWidth</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
          <span class="na">pointHoverRadius</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
          <span class="na">pointHoverBackgroundColor</span><span class="p">:</span> <span class="s1">'rgba(169, 13, 255,1)'</span><span class="p">,</span>
          <span class="na">pointHoverBorderColor</span><span class="p">:</span> <span class="s1">'rgba(169, 13, 255,1)'</span><span class="p">,</span>
          <span class="na">pointHoverBorderWidth</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
          <span class="na">pointRadius</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
          <span class="na">pointHitRadius</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
          <span class="na">data</span><span class="p">:</span> <span class="p">[</span><span class="nx">pre5_tmin</span><span class="p">,</span> <span class="nx">pre4_tmin</span><span class="p">,</span> <span class="nx">pre3_tmin</span><span class="p">,</span> <span class="nx">pre2_tmin</span><span class="p">,</span> <span class="nx">pre1_tmin</span><span class="p">,</span> <span class="nx">tmin</span><span class="p">,</span> <span class="nx">post1_tmin</span><span class="p">,</span> <span class="nx">post2_tmin</span><span class="p">,</span> <span class="nx">post3_tmin</span><span class="p">,</span> <span class="nx">post4_tmin</span><span class="p">,</span> <span class="nx">post5_tmin</span><span class="p">]</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">};</span>
</code></pre>
</div>

<p>With all that said and done I can just simply call it in my return:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="k">return</span> <span class="p">(</span>
      <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">h2</span><span class="o">&gt;</span><span class="nx">Weekly</span> <span class="nx">Information</span><span class="o">&lt;</span><span class="sr">/h2</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="nx">Bar</span> <span class="nx">data</span><span class="o">=</span><span class="p">{</span><span class="nx">data_temps</span><span class="p">}</span> <span class="nx">height</span><span class="o">=</span><span class="p">{</span><span class="mi">120</span><span class="p">}</span><span class="sr">/</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>    <span class="p">);</span>
</code></pre>
</div>

<p>And it will output my graph accordingly!</p>

<hr />

<p>That’s it for now. You can view my project to see how this looks visually and the many, many other things I do with my data and graphs. Part 5 will cover algorithms for trend lines to add some more depth to these charts.</p>

<p>Code on.</p>

<p>Mike Merin</p>

  </div>

  <div class="date">
    Written on July 24, 2017
  </div>

  

</article>

    </div>

    <div class="wrapper-footer">
      <div class="container">
        <footer class="footer">
          
<a href="mailto:MikeMerinWeather@gmail.com"><i class="svg-icon email"></i></a>


<a href="https://github.com/mikemerin"><i class="svg-icon github"></i></a>

<a href="https://www.linkedin.com/in/mike-merin-00860a64"><i class="svg-icon linkedin"></i></a>


<a href="https://www.twitter.com/mikemerin"><i class="svg-icon twitter"></i></a>



        </footer>
      </div>
    </div>

    

  </body>
</html>
